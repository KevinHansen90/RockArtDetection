\chapter{Apéndice}

\section{Implementaciones empleadas}
\label{sec:appendix_model_implementations}
Todas las redes se instancian a partir de sus versiones oficiales de \textsc{PyTorch}/Ultralytics, asegurando reproducibilidad y compatibilidad con las \textit{weights} ImageNet por defecto:
RetinaNet \href{https://pytorch.org/vision/main/models/generated/torchvision.models.detection.retinanet_resnet50_fpn_v2.html}{\texttt{retinanet\_resnet50\_fpn\_v2}},
Faster\,R--CNN \href{https://pytorch.org/vision/main/models/generated/torchvision.models.detection.fasterrcnn_resnet50_fpn_v2.html}{\texttt{fasterrcnn\_resnet50\_fpn\_v2}},
Deformable\,DETR \href{https://huggingface.co/SenseTime/deformable-detr}{\texttt{SenseTime/deformable-detr}} (repositorio de \textit{Hugging Face})
y YOLOv5 \href{https://github.com/ultralytics/yolov5}{\texttt{ultralytics/yolov5}}.
Cada versión se clona o descarga en la \texttt{commit} indicada en el repositorio citado, de modo que el código y los pesos permanecen congelados a lo largo de todos los experimentos.

\section{Métricas de calidad interna de clusters completas}
\label{sec:appendix_internal_metrics}

La Tabla~\ref{tab:app:int_quality_partitional} presenta las \(108\) combinaciones \textit{extractor} × \textit{algoritmo} ×~\(k\) correspondientes a métodos particionales con \(k=2\ldots10\).

\begin{longtable}{llrrrr}
\caption{Métricas de calidad interna normalizadas para K–Means, Agglomerative y Spectral clustering ($k=2$–10).}
\label{tab:app:int_quality_partitional}\\
\hline
\textbf{model} & \textbf{algo} & \textbf{k} & \textbf{silhouette} & \textbf{db\_inv} & \textbf{ch\_norm}\\
\hline
\endfirsthead
\caption[]{Métricas de calidad interna normalizadas para K–Means, Agglomerative y Spectral clustering ($k=2$–10) (cont.).}\\
\hline
\textbf{model} & \textbf{algo} & \textbf{k} & \textbf{silhouette} & \textbf{db\_inv} & \textbf{ch\_norm}\\
\hline
\endhead
\hline
\multicolumn{6}{r}{\small Continúa en la página siguiente}\\
\hline
\endfoot
\hline
\endlastfoot
   resnet18 &        kmeans &  2 &            0.557 &   0.261 &    0.788 \\
   resnet18 &        kmeans &  3 &            0.542 &   0.262 &    0.672 \\
   resnet18 &        kmeans &  4 &            0.541 &   0.289 &    0.526 \\
   resnet18 &        kmeans &  5 &            0.539 &   0.329 &    0.484 \\
   resnet18 &        kmeans &  6 &            0.538 &   0.328 &    0.449 \\
   resnet18 &        kmeans &  7 &            0.538 &   0.344 &    0.416 \\
   resnet18 &        kmeans &  8 &            0.536 &   0.353 &    0.395 \\
   resnet18 &        kmeans &  9 &            0.536 &   0.376 &    0.374 \\
   resnet18 &        kmeans & 10 &            0.539 &   0.408 &    0.358 \\
   resnet18 & agglomerative &  2 &            0.560 &   0.252 &    0.638 \\
   resnet18 & agglomerative &  3 &            0.532 &   0.095 &    0.542 \\
   resnet18 & agglomerative &  4 &            0.523 &   0.080 &    0.426 \\
   resnet18 & agglomerative &  5 &            0.517 &   0.043 &    0.369 \\
   resnet18 & agglomerative &  6 &            0.518 &   0.000 &    0.335 \\
   resnet18 & agglomerative &  7 &            0.520 &   0.079 &    0.311 \\
   resnet18 & agglomerative &  8 &            0.522 &   0.159 &    0.292 \\
   resnet18 & agglomerative &  9 &            0.521 &   0.223 &    0.276 \\
   resnet18 & agglomerative & 10 &            0.517 &   0.191 &    0.263 \\
   resnet18 &      spectral &  2 &            0.546 &   0.149 &    0.683 \\
   resnet18 &      spectral &  3 &            0.536 &   0.385 &    0.420 \\
   resnet18 &      spectral &  4 &            0.509 &   0.481 &    0.283 \\
   resnet18 &      spectral &  5 &            0.505 &   0.522 &    0.217 \\
   resnet18 &      spectral &  6 &            0.503 &   0.485 &    0.209 \\
   resnet18 &      spectral &  7 &            0.513 &   0.434 &    0.265 \\
   resnet18 &      spectral &  8 &            0.513 &   0.477 &    0.257 \\
   resnet18 &      spectral &  9 &            0.515 &   0.463 &    0.263 \\
   resnet18 &      spectral & 10 &            0.513 &   0.439 &    0.238 \\
   resnet50 &        kmeans &  2 &            0.559 &   0.336 &    1.000 \\
   resnet50 &        kmeans &  3 &            0.542 &   0.262 &    0.730 \\
   resnet50 &        kmeans &  4 &            0.546 &   0.335 &    0.652 \\
   resnet50 &        kmeans &  5 &            0.542 &   0.347 &    0.578 \\
   resnet50 &        kmeans &  6 &            0.542 &   0.338 &    0.521 \\
   resnet50 &        kmeans &  7 &            0.543 &   0.359 &    0.470 \\
   resnet50 &        kmeans &  8 &            0.541 &   0.296 &    0.434 \\
   resnet50 &        kmeans &  9 &            0.541 &   0.337 &    0.407 \\
   resnet50 &        kmeans & 10 &            0.541 &   0.359 &    0.380 \\
   resnet50 & agglomerative &  2 &            0.548 &   0.187 &    0.721 \\
   resnet50 & agglomerative &  3 &            0.533 &   0.194 &    0.538 \\
   resnet50 & agglomerative &  4 &            0.533 &   0.223 &    0.463 \\
   resnet50 & agglomerative &  5 &            0.529 &   0.182 &    0.430 \\
   resnet50 & agglomerative &  6 &            0.527 &   0.129 &    0.383 \\
   resnet50 & agglomerative &  7 &            0.526 &   0.158 &    0.347 \\
   resnet50 & agglomerative &  8 &            0.526 &   0.205 &    0.321 \\
   resnet50 & agglomerative &  9 &            0.516 &   0.189 &    0.302 \\
   resnet50 & agglomerative & 10 &            0.514 &   0.222 &    0.287 \\
   resnet50 &      spectral &  2 &            0.544 &   0.207 &    0.712 \\
   resnet50 &      spectral &  3 &            0.532 &   0.315 &    0.555 \\
   resnet50 &      spectral &  4 &            0.530 &   0.287 &    0.391 \\
   resnet50 &      spectral &  5 &            0.526 &   0.447 &    0.326 \\
   resnet50 &      spectral &  6 &            0.524 &   0.449 &    0.303 \\
   resnet50 &      spectral &  7 &            0.524 &   0.364 &    0.272 \\
   resnet50 &      spectral &  8 &            0.527 &   0.428 &    0.300 \\
   resnet50 &      spectral &  9 &            0.524 &   0.398 &    0.259 \\
   resnet50 &      spectral & 10 &            0.517 &   0.488 &    0.232 \\
densenet121 &        kmeans &  2 &            0.553 &   0.303 &    0.905 \\
densenet121 &        kmeans &  3 &            0.545 &   0.271 &    0.728 \\
densenet121 &        kmeans &  4 &            0.548 &   0.388 &    0.666 \\
densenet121 &        kmeans &  5 &            0.543 &   0.371 &    0.582 \\
densenet121 &        kmeans &  6 &            0.544 &   0.393 &    0.532 \\
densenet121 &        kmeans &  7 &            0.543 &   0.343 &    0.470 \\
densenet121 &        kmeans &  8 &            0.543 &   0.392 &    0.458 \\
densenet121 &        kmeans &  9 &            0.536 &   0.351 &    0.419 \\
densenet121 &        kmeans & 10 &            0.537 &   0.335 &    0.391 \\
densenet121 & agglomerative &  2 &            0.544 &   0.242 &    0.739 \\
densenet121 & agglomerative &  3 &            0.543 &   0.279 &    0.571 \\
densenet121 & agglomerative &  4 &            0.537 &   0.160 &    0.493 \\
densenet121 & agglomerative &  5 &            0.528 &   0.203 &    0.445 \\
densenet121 & agglomerative &  6 &            0.526 &   0.178 &    0.400 \\
densenet121 & agglomerative &  7 &            0.521 &   0.183 &    0.369 \\
densenet121 & agglomerative &  8 &            0.520 &   0.182 &    0.343 \\
densenet121 & agglomerative &  9 &            0.521 &   0.216 &    0.317 \\
densenet121 & agglomerative & 10 &            0.522 &   0.210 &    0.296 \\
densenet121 &      spectral &  2 &            0.549 &   0.297 &    0.819 \\
densenet121 &      spectral &  3 &            0.535 &   0.449 &    0.419 \\
densenet121 &      spectral &  4 &            0.534 &   0.389 &    0.302 \\
densenet121 &      spectral &  5 &            0.527 &   0.531 &    0.273 \\
densenet121 &      spectral &  6 &            0.523 &   0.472 &    0.274 \\
densenet121 &      spectral &  7 &            0.524 &   0.436 &    0.293 \\
densenet121 &      spectral &  8 &            0.528 &   0.444 &    0.306 \\
densenet121 &      spectral &  9 &            0.524 &   0.427 &    0.270 \\
densenet121 &      spectral & 10 &            0.522 &   0.443 &    0.254 \\
      vgg16 &        kmeans &  2 &            0.559 &   0.343 &    0.990 \\
      vgg16 &        kmeans &  3 &            0.555 &   0.333 &    0.815 \\
      vgg16 &        kmeans &  4 &            0.553 &   0.314 &    0.659 \\
      vgg16 &        kmeans &  5 &            0.543 &   0.292 &    0.587 \\
      vgg16 &        kmeans &  6 &            0.543 &   0.307 &    0.531 \\
      vgg16 &        kmeans &  7 &            0.543 &   0.326 &    0.484 \\
      vgg16 &        kmeans &  8 &            0.541 &   0.346 &    0.450 \\
      vgg16 &        kmeans &  9 &            0.538 &   0.290 &    0.409 \\
      vgg16 &        kmeans & 10 &            0.536 &   0.315 &    0.378 \\
      vgg16 & agglomerative &  2 &            0.552 &   0.287 &    0.870 \\
      vgg16 & agglomerative &  3 &            0.542 &   0.082 &    0.617 \\
      vgg16 & agglomerative &  4 &            0.543 &   0.192 &    0.510 \\
      vgg16 & agglomerative &  5 &            0.526 &   0.171 &    0.442 \\
      vgg16 & agglomerative &  6 &            0.527 &   0.203 &    0.403 \\
      vgg16 & agglomerative &  7 &            0.524 &   0.149 &    0.367 \\
      vgg16 & agglomerative &  8 &            0.520 &   0.121 &    0.338 \\
      vgg16 & agglomerative &  9 &            0.521 &   0.135 &    0.314 \\
      vgg16 & agglomerative & 10 &            0.521 &   0.104 &    0.294 \\
      vgg16 &      spectral &  2 &            0.556 &   0.334 &    0.951 \\
      vgg16 &      spectral &  3 &            0.551 &   0.421 &    0.521 \\
      vgg16 &      spectral &  4 &            0.524 &   0.534 &    0.361 \\
      vgg16 &      spectral &  5 &            0.531 &   0.490 &    0.417 \\
      vgg16 &      spectral &  6 &            0.529 &   0.432 &    0.394 \\
      vgg16 &      spectral &  7 &            0.528 &   0.389 &    0.336 \\
      vgg16 &      spectral &  8 &            0.527 &   0.381 &    0.329 \\
      vgg16 &      spectral &  9 &            0.530 &   0.393 &    0.321 \\
      vgg16 &      spectral & 10 &            0.529 &   0.436 &    0.287 \\
\end{longtable}

Se observa que:

\begin{itemize}
  \item \textbf{ResNet-50 + K–Means} y \textbf{DenseNet-121 + K–Means}
        alcanzan simultáneamente los valores más altos de \(\widehat S\) y
        \(\widehat{CH}\), indicando una separación nítida entre clusters.
  \item Los métodos aglomerativos tienden a obtener \(\widehat S\) ligeramente
        inferior pero muestran menor varianza en \(\widehat{DB}\),
        sugiriendo particiones algo más equilibradas.
  \item Spectral clustering no supera a K–Means en ninguna combinación,
        aunque mantiene una estabilidad apreciable frente a variaciones de \(k\).
\end{itemize}

\section{Metricas completas de calidad interna con DBSCAN}

La naturaleza no particional de DBSCAN exige evaluar diferentes umbrales de densidad.
En la Tabla~\ref{tab:app:int_quality_dbscan} se listan las 40 configuraciones probadas, variando \(\varepsilon\in[0.25,0.45]\) y \texttt{min\_samples}\(\in\{4,5\}\).

\begin{longtable}{lrrrrrr}
\caption{Métricas de calidad interna normalizadas para DBSCAN con diferentes hiperparámetros.}
\label{tab:app:int_quality_dbscan}\\
\hline
\textbf{model} & \textbf{eps} & \textbf{min\_samples} & \textbf{noise\_ratio} &
\textbf{silhouette} & \textbf{db\_inv} & \textbf{ch\_norm}\\
\hline
\endfirsthead
\caption[]{Métricas de calidad interna normalizadas para DBSCAN con diferentes hiperparámetros (cont.).}\\
\hline
\textbf{model} & \textbf{eps} & \textbf{min\_samples} & \textbf{noise\_ratio} &
\textbf{silhouette} & \textbf{db\_inv} & \textbf{ch\_norm}\\
\hline
\endhead
\hline
\multicolumn{7}{r}{\small Continúa en la página siguiente}\\
\hline
\endfoot
\hline
\endlastfoot
   resnet18 & 0.25 &            4 &         0.92 &            0.584 &   0.847 &    0.019 \\
   resnet18 & 0.25 &            5 &         0.95 &            0.597 &   0.825 &    0.034 \\
   resnet18 & 0.30 &            4 &         0.69 &            0.447 &   0.803 &    0.006 \\
   resnet18 & 0.30 &            5 &         0.74 &            0.458 &   0.771 &    0.011 \\
   resnet18 & 0.35 &            4 &         0.38 &            0.412 &   0.778 &    0.004 \\
   resnet18 & 0.35 &            5 &         0.42 &            0.422 &   0.783 &    0.007 \\
   resnet18 & 0.40 &            4 &         0.15 &            0.447 &   0.793 &    0.002 \\
   resnet18 & 0.40 &            5 &         0.16 &            0.451 &   0.804 &    0.003 \\
   resnet18 & 0.45 &            4 &         0.05 &            0.519 &   0.855 &    0.001 \\
   resnet18 & 0.45 &            5 &         0.05 &            0.614 &   0.955 &    0.005 \\
   resnet50 & 0.25 &            4 &         0.96 &            0.601 &   0.851 &    0.019 \\
   resnet50 & 0.25 &            5 &         0.97 &            0.651 &   0.888 &    0.024 \\
   resnet50 & 0.30 &            4 &         0.86 &            0.583 &   0.910 &    0.022 \\
   resnet50 & 0.30 &            5 &         0.90 &            0.587 &   0.916 &    0.032 \\
   resnet50 & 0.35 &            4 &         0.68 &            0.499 &   0.796 &    0.012 \\
   resnet50 & 0.35 &            5 &         0.73 &            0.548 &   0.831 &    0.027 \\
   resnet50 & 0.40 &            4 &         0.41 &            0.402 &   0.778 &    0.003 \\
   resnet50 & 0.40 &            5 &         0.46 &            0.406 &   0.765 &    0.006 \\
   resnet50 & 0.45 &            4 &         0.19 &            0.408 &   0.763 &    0.000 \\
   resnet50 & 0.45 &            5 &         0.22 &            0.418 &   0.775 &    0.001 \\
densenet121 & 0.25 &            4 &         0.96 &            0.683 &   0.948 &    0.033 \\
densenet121 & 0.25 &            5 &         0.97 &            0.685 &   0.925 &    0.042 \\
densenet121 & 0.30 &            4 &         0.82 &            0.552 &   0.855 &    0.019 \\
densenet121 & 0.30 &            5 &         0.86 &            0.565 &   0.847 &    0.025 \\
densenet121 & 0.35 &            4 &         0.56 &            0.432 &   0.784 &    0.004 \\
densenet121 & 0.35 &            5 &         0.61 &            0.444 &   0.777 &    0.009 \\
densenet121 & 0.40 &            4 &         0.27 &            0.414 &   0.748 &    0.001 \\
densenet121 & 0.40 &            5 &         0.30 &            0.424 &   0.759 &    0.002 \\
densenet121 & 0.45 &            4 &         0.09 &            0.445 &   0.767 &    0.001 \\
densenet121 & 0.45 &            5 &         0.11 &            0.477 &   0.780 &    0.003 \\
      vgg16 & 0.25 &            4 &         0.99 &            0.701 &   1.000 &    0.050 \\
      vgg16 & 0.25 &            5 &         0.99 &            0.709 &   0.997 &    0.066 \\
      vgg16 & 0.30 &            4 &         0.89 &            0.546 &   0.857 &    0.020 \\
      vgg16 & 0.30 &            5 &         0.93 &            0.568 &   0.868 &    0.035 \\
      vgg16 & 0.35 &            4 &         0.69 &            0.388 &   0.784 &    0.001 \\
      vgg16 & 0.35 &            5 &         0.73 &            0.419 &   0.768 &    0.013 \\
      vgg16 & 0.40 &            4 &         0.40 &            0.391 &   0.768 &    0.000 \\
      vgg16 & 0.40 &            5 &         0.44 &            0.395 &   0.754 &    0.000 \\
      vgg16 & 0.45 &            4 &         0.16 &            0.429 &   0.787 &    0.000 \\
      vgg16 & 0.45 &            5 &         0.19 &            0.450 &   0.764 &    0.001 \\
\end{longtable}

\begin{itemize}
  \item Las mejores puntuaciones de \(\widehat S\) y \(\widehat{DB}\) se obtienen con \(\varepsilon=0.30\)–\(0.35\), aunque a costa de una tasa de ruido (\textit{noise\_ratio}) del 60--90~\%.
  \item La métrica \(\widehat{CH}\) penaliza fuertemente la presencia de ruido, arrojando valores cercanos a \(0\) incluso en casos con buena cohesión interna; por ello se interpreta con cautela.
  \item Frente a los métodos particionales, DBSCAN ofrece clusters densos y compactos, útiles para aislar motivos morfológicamente homogéneos, pero reduce su cobertura sobre el conjunto total de motivos.
\end{itemize}
